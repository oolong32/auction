<!DOCTYPE html>
<html lang="de">

<!--
  Design & Coding: Josef Renner, josefrenner.ch
  Built with Node/Express
-->

{# check environment and set path accordingly #}
{% if settings.env == "development" %}
  {% set path = "http://localhost:3000" %}
{% else %}
  {% set path = "https://auction.francoisenussbaumer.ch" %}
{% endif %}

<head>
  <meta charset="UTF-8">
  <title>Françoise Nussbaumer – Bild des Tages – {{ title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
  <meta name="theme-color" content="#d4d1c4">

  <link rel="stylesheet" href="{{ path }}/reset.css">
  <link href="https://fonts.googleapis.com/css?family=Old+Standard+TT" rel="stylesheet">
  <link rel="stylesheet" href="{{ path }}/style.css">
</head>

<body>
  <header>
    <h1><a href="/"><small>Françoise Nussbaumer</small><br>Bild des Tages</a></h1>
  </header>

  <main>
  {% block content %}
    <p>if you see this, there’s a mistake in a template.</p>
  {% endblock %}
  </main>

 {#
  <nav>
    <section>
      <h2 id="nav-users">Bieter</h2>
      <ul>
        <li><a href="/user">Auflistung</a></li>
      </ul>
    </section>

    <section id="nav-articles">
      <h2>Bilder</h2>
      <ul>
        <li><a href="/article">Auflistung</a></li>
        <li><a href="/article/create">Neues Bild versteigern</a></li>
        <li><a href="/reset-article">Zurücksetzen</a></li>
      </ul>
    </section>

    <section id="nav-bids">
      <h2>Gebote</h2>
      <ul>
        <li><a href="/bid">Auflistung</a></li>
      </ul>
    </section>

  </nav>
  #}

  <footer>
    <p>© <a href="https://francoisenussbaumer.ch" target="_blank">Françoise Nussbaumer</a> – <a href="mailto:mail@francoisenussbaumer.ch">Kontakt</a><br>
    Design & Programmierung: <a href="https://josefrenner.ch" target="_blank">Josef Renner</a>
    </p>
  </footer>

  <script>
    // Einen Verlauf in der Auflistung der Gebote
    if (document.querySelector('#article-bids')) {
      var bid_list = document.querySelectorAll('#article-bids li');
      /* var bids = bid_list.childNodes; */
      var bid_count = bid_list.length;
      // Der Verlauf wird ab 6 Geboten gezeichnet.
      if (bid_count >= 6) {
        // Liste halbieren oder dritteln
        var i = (bid_count > 10) ? Math.floor(bid_count/4) : Math.floor(bid_count/3);
        var factor = 1 / bid_count; // Schritt, um den die Deckkraft verringert wird
        var opacity_value = 1;
        for (; i<bid_count; i++) {
          opacity_value -= factor;
          console.log(bid_list[i]);
          var li = bid_list[i];
          li.style.opacity = opacity_value;
        }
      }
    }
  </script>
</body>
</html>
